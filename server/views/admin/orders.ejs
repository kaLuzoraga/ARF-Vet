<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('partials/head') %>
  <title>Orders - ARF Vet Shop</title>
  <link rel="stylesheet" href="/server/css/admin/orders.css">
</head>

<body>
  <div class="admin-wrapper">
    
    <!-- Sidebar Partial -->
    <%- include('../partials/adminsidebar') %>

    <!-- Main content -->
    <div class="main-area">
      <main class="main-content">
        <div class="header">
          <h1>Orders Management</h1>
        </div>

        <!-- Current Orders -->
        <section class="category">
          <h2>Current Orders</h2>
          <table>
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Total</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <% currentOrders.forEach(order => { %>
                <tr>
                  <td><%= order.id %></td>
                  <td><%= order.customer %></td>
                  <td><%= order.total %></td>
                  <td class="actions">
                    <form method="POST" action="/admin/orders/<%= order.id %>/accept" style="display:inline;">
                      <button class="accept" type="submit">Accept</button>
                    </form>
                    <form method="POST" action="/admin/orders/<%= order.id %>/cancel" style="display:inline;">
                      <button class="cancel" type="submit">Cancel</button>
                    </form>
                    <form method="POST" action="/admin/orders/<%= order.id %>/delete" style="display:inline;">
                      <button class="delete" type="submit">Delete</button>
                    </form>
                  </td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </section>

        <!-- Order Status -->
        <section class="category">
          <h2>Order Status Management</h2>
          <table>
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <% statusOrders.forEach(order => { %>
                <tr>
                  <td><%= order.id %></td>
                  <td><%= order.customer %></td>
                  <td>
                    <form method="POST" action="/admin/orders/<%= order.id %>/update" style="display: flex; gap: 5px;">
                      <select name="status" class="status-select">
                        <option value="Processing" <%= order.status === "Processing" ? "selected" : "" %>>Processing</option>
                        <option value="Out for Delivery" <%= order.status === "Out for Delivery" ? "selected" : "" %>>Out for Delivery</option>
                        <option value="Completed" <%= order.status === "Completed" ? "selected" : "" %>>Completed</option>
                        <option value="Cancelled" <%= order.status === "Cancelled" ? "selected" : "" %>>Cancelled</option>
                      </select>
                      <button class="update" type="submit">Update</button>
                    </form>
                  </td>
                  <td class="actions">
                    <form method="POST" action="/admin/orders/<%= order.id %>/delete-status">
                      <button class="delete" type="submit">Delete</button>
                    </form>
                  </td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </section>

        <!-- Order History -->
        <section class="category">
          <h2>Order History</h2>
          <table>
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Status</th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody>
              <% historyOrders.forEach(order => { %>
                <tr>
                  <td><%= order.id %></td>
                  <td><%= order.customer %></td>
                  <td><%= order.status %></td>
                  <td><%= order.date %></td>
                </tr>
              <% }) %>
            </tbody>
          </table>
        </section>
      </main>

      <!-- Footer Partial -->
      <%- include('../partials/adminfooter') %>
    </div>
  </div>
</body>
</html>
